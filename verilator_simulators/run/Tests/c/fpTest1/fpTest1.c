#include <stdio.h>
#include <stdint.h>
#include "riscv_counters.h"

unsigned ex[342] = {
  0x402580a7,
  0x4055fe31,
  0x408a5861,
  0x40b2e0fa,
  0x40e749ce,
  0x411586ce,
  0x41415610,
  0x4179fb44,
  0x41a19c94,
  0x41d0f646,
  0x420717bf,
  0x422eac65,
  0x4261d9cb,
  0x429202e1,
  0x42bcca78,
  0x42f41abf,
  0x431dcfea,
  0x434c0ca2,
  0x4383eab0,
  0x43aa911e,
  0x43dc8a81,
  0x440e941a,
  0x44385a38,
  0x446e5d98,
  0x449a1a1e,
  0x44c7408f,
  0x4500d0bf,
  0x45268e90,
  0x45575b2e,
  0x458b39ff,
  0x45b404b3,
  0x45e8c2ff,
  0x46167aa8,
  0x4642915c,
  0x467b92f0,
  0x46a2a423,
  0x46d24b0e,
  0x4707f40f,
  0x472fc941,
  0x47634a1d,
  0x4792f0fe,
  0x47bdfe58,
  0x47f5a8d5,
  0x481ed146,
  0x484d5965,
  0x4884c1d1,
  0x48aba747,
  0x48ddf229,
  0x490f7c9e,
  0x493986dc,
  0x496fe250,
  0x499b156c,
  0x49c8857e,
  0x4a01a2d0,
  0x4a279e2d,
  0x4a58ba60,
  0x4a8c1d0b,
  0x4ab52a45,
  0x4aea3e94,
  0x4b17700e,
  0x4b43cea9,
  0x4b7d2d34,
  0x4ba3ad5f,
  0x4bd3a1ff,
  0x4c08d1c5,
  0x4c30e7ec,
  0x4c64bcc5,
  0x4c93e09f,
  0x4cbf342f,
  0x4cf73973,
  0x4d1fd446,
  0x4d4ea847,
  0x4d859a51,
  0x4dacbf36,
  0x4ddf5c1d,
  0x4e10669f,
  0x4e3ab56d,
  0x4e716988,
  0x4e9c1258,
  0x4ec9cc84,
  0x4f02763c,
  0x4f28af8a,
  0x4f5a1bd4,
  0x4f8d018c,
  0x4fb651b8,
  0x4febbc98,
  0x50186706,
  0x50450dfc,
  0x507eca17,
  0x50a4b84d,
  0x50d4fb23,
  0x5109b0e7,
  0x5132086f,
  0x516631d0,
  0x5194d1cb,
  0x51c06c05,
  0x51f8cca7,
  0x5220d8f1,
  0x524ff952,
  0x52867437,
  0x52add8f3,
  0x52e0c865,
  0x53115220,
  0x533be5ed,
  0x5372f340,
  0x539d10e1,
  0x53cb15a1,
  0x54034b00,
  0x5429c2a5,
  0x545b7f8a,
  0x548de783,
  0x54b77b10,
  0x54ed3d0e,
  0x55195f93,
  0x55464f5c,
  0x558034cf,
  0x55a5c4ef,
  0x55d65679,
  0x560a9173,
  0x56332ac5,
  0x5667a937,
  0x5695c47c,
  0x56c1a5d0,
  0x56fa6261,
  0x5721df3d,
  0x57514c78,
  0x57874f79,
  0x57aef472,
  0x57e236f4,
  0x58123f1a,
  0x583d1856,
  0x58747f6e,
  0x589e1101,
  0x58cc60cb,
  0x59042119,
  0x592ad779,
  0x595ce579,
  0x598eceea,
  0x59b8a643,
  0x59eebfea,
  0x5a1a59ae,
  0x5a4792be,
  0x5a8105e0,
  0x5aa6d341,
  0x5ad7b3ff,
  0x5b0b736a,
  0x5b344ef1,
  0x5b6922fe,
  0x5b96b8b8,
  0x5bc2e19b,
  0x5bfbfab2,
  0x5c22e737,
  0x5c52a1c9,
  0x5c882c21,
  0x5cb011c1,
  0x5ce3a7db,
  0x5d132d99,
  0x5d3e4cb5,
  0x5d760e26,
  0x5d9f12c6,
  0x5dcdae16,
  0x5e04f892,
  0x5e2bee13,
  0x5e5e4db4,
  0x5e8fb7cd,
  0x5eb9d362,
  0x5ef04543,
  0x5f1b5564,
  0x5f48d833,
  0x5f81d848,
  0x5fa7e34f,
  0x5fd913c3,
  0x600c56d4,
  0x603574fb,
  0x606a9f2d,
  0x6097ae81,
  0x60c41f68,
  0x60fd959c,
  0x6123f0de,
  0x6153f945,
  0x61890a31,
  0x61b130e0,
  0x61e51b1a,
  0x62141d9b,
  0x623f8309,
  0x62779f68,
  0x62a01630,
  0x62cefd81,
  0x6305d16a,
  0x632d0673,
  0x635fb839,
  0x6390a22b,
  0x63bb026b,
  0x63f1cd16,
  0x641c52b4,
  0x644a1fbb,
  0x6482ac07,
  0x64a8f518,
  0x64da75c2,
  0x650d3bb0,
  0x65369ce5,
  0x656c1dca,
  0x6598a5dd,
  0x65c55f3d,
  0x65ff3327,
  0x6624fc39,
  0x665552f5,
  0x6689e9ad,
  0x66b251d7,
  0x66e690bb,
  0x67150f28,
  0x6740bb5c,
  0x6779333c,
  0x67a11b42,
  0x67d04f11,
  0x6806aba6,
  0x682e209f,
  0x68612511,
  0x68918e0a,
  0x68bc3365,
  0x68f35769,
  0x691d51a2,
  0x694b695b,
  0x69838122,
  0x69aa08a3,
  0x69dbda09,
  0x6a0e2204,
  0x6a37c6b5,
  0x6a6d9edd,
  0x6a999ecf,
  0x6ac6a11f,
  0x6b0069ab,
  0x6b260948,
  0x6b56aed9,
  0x6b8aca96,
  0x6bb374a5,
  0x6be808bc,
  0x6c16023d,
  0x6c41f5a9,
  0x6c7ac99f,
  0x6ca221fc,
  0x6cd1a2c5,
  0x6d078744,
  0x6d2f3c97,
  0x6d62943d,
  0x6d927b69,
  0x6dbd6651,
  0x6df4e443,
  0x6e1e5232,
  0x6e4cb516,
  0x6e845798,
  0x6eab1def,
  0x6edd4094,
  0x6f0f09d0,
  0x6f38f26b,
  0x6f6f2262,
  0x6f9a9957,
  0x6fc7e50d,
  0x70013b17,
  0x70271810,
  0x70580cf7,
  0x708bacef,
  0x70b49950,
  0x70e98327,
  0x7116f6e2,
  0x714331fc,
  0x717c62a0,
  0x71a32a68,
  0x71d2f8aa,
  0x7208644c,
  0x72305a61,
  0x726405c2,
  0x72936a4e,
  0x72be9b33,
  0x72f673a4,
  0x731f5463,
  0x734e02ec,
  0x73852f6a,
  0x73ac34fc,
  0x73dea964,
  0x740ff314,
  0x743a2007,
  0x7470a85c,
  0x749b9575,
  0x74c92b0a,
  0x75020dd6,
  0x7528288e,
  0x75596d4c,
  0x758c90b7,
  0x75b5bfd4,
  0x75eafff5,
  0x7617ed12,
  0x7644704d,
  0x767dfe35,
  0x76a4347d,
  0x76d450b5,
  0x770942b8,
  0x773179f8,
  0x7765799b,
  0x77945ab4,
  0x77bfd209,
  0x77f8058c,
  0x78205838,
  0x784f52e2,
  0x7886089c,
  0x78ad4dd1,
  0x78e01480,
  0x7910ddd3,
  0x793b4f8d,
  0x797230d0,
  0x799c932d,
  0x79ca7318,
  0x7a02e1ec,
  0x7a293ac7,
  0x7a5acfdc,
  0x7a8d75f0,
  0x7ab6e836,
  0x7aec7f2e,
  0x7b18e4d3,
  0x7b45b0a5,
  0x7b7f9c68,
  0x7ba54045,
  0x7bd5aaf2,
  0x7c0a228f,
  0x7c329b63,
  0x7c66efd2,
  0x7c954ca1,
  0x7cc10ad8,
  0x7cf99a02,
  0x7d215db4,
  0x7d50a4fb,
  0x7d86e331,
  0x7dae6870,
  0x7de181ed,
  0x7e11ca13,
  0x7e3c8105,
  0x7e73bbc8,
  0x7e9d9286,
  0x7ecbbd42,
  0x7f800000,
  0x7f800000,
  0x7f800000 };

union floatu {
  double    d;
  unsigned long long u;
};

int main (int argc, char *argv[])
{
  float x = 2.0;
  float pi = 3.1459265;

  int i;
  int pass = 1;
  for (i=0; i<342; i++) {
    x = (( pi * x ) / 3.3333) * 1.37;

    unsigned got = *(unsigned*)(&x);
    if (ex[i] != got) {
      printf ("Error x[%d] = %x, expected %x\n", i, got, ex[i]);
      pass = 0;
    }
  }

  if (pass == 1) {
    printf("PASSED!\n");
    TEST_PASS
  } else {
    printf("ERROR: mismatches occured\n");
    TEST_FAIL
  }

  return 0;
}
